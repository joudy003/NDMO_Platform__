<!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta charset="utf-8" />
    <link rel="stylesheet" href="globals.css" />
    <link rel="stylesheet" href="styleguide.css" />
    <link rel="stylesheet" href="style13.css" />
    
    <script>
      document.addEventListener("DOMContentLoaded", () => {
  const inputs = document.querySelectorAll(".otp-input");
  const confirmBtn = document.getElementById("confirmOtpBtn");
  const resendBtn = document.querySelector(".text-wrapper-7"); // إعادة الإرسال
  const correctOTP = "123456";
  
  let timeLeft = 60; // عدد الثواني
  let timerInterval;
  let otpExpired = false;

  // تشغيل المؤقت
  startTimer();

  function startTimer() {
    otpExpired = false;
    timeLeft = 60;

    timerInterval = setInterval(() => {
      timeLeft--;

      if (timeLeft <= 0) {
        clearInterval(timerInterval);
        otpExpired = true;

        // تعطيل الخانات
        inputs.forEach(inp => inp.disabled = true);
        confirmBtn.disabled = true;

        alert("انتهت صلاحية رمز التحقق. يرجى طلب رمز جديد.");
      }
    }, 1000);
  }

  // تشغيل التنقل بين الخانات
  inputs.forEach((input, index) => {
    input.addEventListener("input", () => {
      input.value = input.value.replace(/\D/g, ""); // السماح بالأرقام فقط

      if (input.value.length > 0 && index < inputs.length - 1) {
        inputs[index + 1].focus();
      }
    });

    input.addEventListener("keydown", (e) => {
      if (e.key === "Backspace" && input.value === "" && index > 0) {
        inputs[index - 1].focus();
      }
    });
  });

  // زر تأكيد الرمز
  confirmBtn.addEventListener("click", () => {
    if (otpExpired) {
      alert("انتهت صلاحية رمز التحقق. يرجى طلب رمز جديد.");
      return;
    }

    let enteredCode = "";
    inputs.forEach(input => enteredCode += input.value);

    if (enteredCode.length < 6) {
      alert("يرجى إدخال رمز التحقق كاملاً.");
      return;
    }

    if (enteredCode === correctOTP) {
      window.location.href = "Set_New_Password.html";
    } else {
      alert("رمز التحقق الذي أدخلته غير صحيح. يرجى المحاولة مرة أخرى.");
    }
  });

  // زر إعادة الإرسال
  resendBtn.addEventListener("click", (e) => {
    e.preventDefault();

    // إعادة تفعيل الخانات
    inputs.forEach(inp => {
      inp.disabled = false;
      inp.value = "";
    });

    confirmBtn.disabled = false;
    inputs[0].focus();

    clearInterval(timerInterval);
    startTimer();

    alert("تم إرسال رمز جديد إلى بريدك الإلكتروني.");
  });
});
document.addEventListener("DOMContentLoaded", () => {
  const inputs = document.querySelectorAll(".otp-input");
  const confirmBtn = document.getElementById("confirmOtpBtn");
  const correctOTP = "123456";

  // تحريك المؤشر بين خانات الـ OTP
  inputs.forEach((input, index) => {
    input.addEventListener("input", () => {
      // السماح فقط بالأرقام
      input.value = input.value.replace(/\D/g, "");

      if (input.value.length > 0 && index < inputs.length - 1) {
        inputs[index + 1].focus(); // ينتقل للخانة التالية
      }
    });

    input.addEventListener("keydown", (e) => {
      if (e.key === "Backspace" && input.value === "" && index > 0) {
        inputs[index - 1].focus(); // يرجع للخلف عند المسح
      }
    });
  });

  // عند الضغط على زر "تأكيد الرمز"
  confirmBtn.addEventListener("click", () => {
    let enteredCode = "";

    inputs.forEach((input) => {
      enteredCode += input.value;
    });

    // التحقق أن جميع الخانات ممتلئة
    if (enteredCode.length < 6) {
      alert("❌ يرجى إدخال رمز التحقق كاملاً.");
      return;
    }

    if (enteredCode === correctOTP) {
      // ✅ الكود صحيح
      window.location.href = "Set_New_Password.html";
    } else {
      // ❌ الكود غير صحيح
      alert("رمز التحقق الذي أدخلته غير صحيح. يرجى المحاولة مرة أخرى.");
    }
  });
});
    </script>
  </head>
  <body>
    <div class="frame">
      <div class="examples-reviews-web">
        <img class="kingdom" src="img/your-image.jpg" />
        <div class="form">
          <div class="background"></div>
          <div class="rectangle"></div>
          <div class="div"></div>

          <div class="otp-container" style="position:absolute; top:133px; left:18px; gap:16px;">
            <input type="text" maxlength="1" class="otp-input" />
            <input type="text" maxlength="1" class="otp-input" />
            <input type="text" maxlength="1" class="otp-input" />
            <input type="text" maxlength="1" class="otp-input" />
            <input type="text" maxlength="1" class="otp-input" />
            <input type="text" maxlength="1" class="otp-input" />
          </div>
<p id="timerDisplay" style="
  position:absol٢ute;
  top:200px;
  left:18px;
  font-size: 16px;
  color: #ffffff;
  font-weight: 500;
  direction: rtl;
">
  ⏳ ينتهي خلال: 01:00
</p>

          <div class="becaus">
            <p class="p">
              <span class="span">لم يصلك الرمز؟</span>
              <a href="#" target="_blank" rel="noopener noreferrer">
                <span class="text-wrapper-7">إعادة الإرسال</span>
              </a>
            </p>
          </div>

          <p class="element">
            <span class="text-wrapper-8">رمز التحقق<br /><br /></span>
            <span class="text-wrapper-9">
              تم إرسال رمز مكوّن من 6 أرقام إلى بريدك الإلكتروني. يرجى إدخاله أدناه لتأكيد هويتك.
            </span>
          </p>

          <p class="text-wrapper-10">منصة الاستبيانات - مكتب إدارة البيانات الوطنية © 2025</p>
          <div class="left-arrow"><img class="left" src="img/Arrow_to_left8.png" /></div>
        </div>

        <p class="NDMO">
          <span class="text-wrapper-11">منصة الإستبيانات التابعة <br /></span>
          <span class="text-wrapper-12"><br /></span>
          <span class="text-wrapper-13">لمكتب إدارة البيانات الوطنية - NDMO<br /></span>
          <span class="text-wrapper-14"><br /></span>
          <span class="text-wrapper-13">
            وهي منصة رقمية موحدة تمكّن الجهات الحكومية من<br />
            التسجيل الرسمي، تعبئة الاستبيانات، ومتابعة آخر <br />الأخبار والتحديثات الرسمية
          </span>
        </p>

        <div class="NDMO-logo-homepage" onclick="window.location.href='index.html'"></div>

        <div class="div-wrapper">
          <div class="text-wrapper-15" onclick="window.location.href='Login_Page.html'">
            العودة لتسجيل الدخول
          </div>
        </div>

        <!-- أعطيت الزر id بدل onclick -->
        <button class="wide-dark-button" id="confirmOtpBtn">
          <span class="text-wrapper-16">تأكيد الرمز</span>
        </button>
      </div>
    </div>
  </body>
</html>
